<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Northern Tech Solutions - AI Document Assistant</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <style>
        :root {
            --primary-red: #e63946;
            --primary-white: #f1faee;
            --primary-light-blue: #a8dadc;
            --primary-blue: #457b9d;
            --primary-dark-blue: #1d3557;
            --compliant-green: #2a9d8f;
            --warning-yellow: #e9c46a;
            --danger-red: #e76f51;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #333333;
            --border-color: #dee2e6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 40px;
            margin-right: 10px;
        }

        .logo h1 {
            font-size: 24px;
            color: var(--primary-dark-blue);
        }

        .compliance-indicator {
            display: flex;
            align-items: center;
            background-color: var(--compliant-green);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
        }

        .compliance-indicator i {
            margin-right: 8px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            height: fit-content;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        .card-title {
            font-size: 18px;
            color: var(--primary-dark-blue);
            font-weight: 600;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .card-actions button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            color: var(--primary-blue);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .document-library {
            max-height: 500px;
            overflow-y: auto;
        }

        .document-list {
            list-style: none;
            margin-top: 15px;
        }

        .document-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .document-item:hover {
            background-color: rgba(168, 218, 220, 0.1);
        }

        .document-item.active {
            background-color: rgba(168, 218, 220, 0.2);
            border-left: 3px solid var(--primary-blue);
        }

        .document-icon {
            margin-right: 10px;
            font-size: 20px;
            color: var(--primary-blue);
        }

        .document-info {
            flex: 1;
        }

        .document-title {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .document-meta {
            font-size: 12px;
            color: #666;
            display: flex;
            justify-content: space-between;
        }

        .document-type {
            background-color: var(--primary-light-blue);
            color: var(--primary-dark-blue);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
        }

        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-top: 15px;
            transition: border-color 0.3s;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--primary-blue);
        }

        .upload-icon {
            font-size: 40px;
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        .upload-text {
            font-size: 14px;
            color: #666;
        }

        .upload-input {
            display: none;
        }

        .main-content {
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 20px;
        }

        .document-preview {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: #f8f9fa;
            margin-top: 15px;
        }

        .preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #666;
        }

        .preview-placeholder i {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--primary-blue);
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 15px;
        }

        .chat-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-dark-blue);
            display: flex;
            align-items: center;
        }

        .chat-title i {
            margin-right: 10px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 18px;
            line-height: 1.4;
            position: relative;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--primary-blue);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .ai-message {
            align-self: flex-start;
            background-color: #f0f0f0;
            color: var(--text-color);
            border-bottom-left-radius: 5px;
        }

        .message-source {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
            font-style: italic;
        }

        .ai-message .message-source {
            color: rgba(0, 0, 0, 0.5);
        }

        .chat-input-container {
            display: flex;
            margin-top: 15px;
            border: 1px solid var(--border-color);
            border-radius: 24px;
            overflow: hidden;
            padding: 5px;
        }

        .chat-input {
            flex: 1;
            border: none;
            padding: 10px 15px;
            outline: none;
            font-size: 14px;
        }

        .send-button {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .memory-indicator {
            display: flex;
            align-items: center;
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }

        .memory-indicator i {
            margin-right: 5px;
            color: var(--primary-blue);
        }

        .memory-count {
            background-color: var(--primary-light-blue);
            color: var(--primary-dark-blue);
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 5px;
            font-weight: 600;
        }

        .document-tag {
            display: inline-block;
            background-color: var(--primary-light-blue);
            color: var(--primary-dark-blue);
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .document-tags {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
        }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .processing-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background-color: rgba(168, 218, 220, 0.2);
            border-radius: 8px;
            margin: 10px 0;
        }

        .processing-text {
            font-size: 14px;
            color: var(--primary-dark-blue);
        }

        .document-status {
            display: flex;
            align-items: center;
            font-size: 12px;
            margin-top: 5px;
        }

        .status-icon {
            margin-right: 5px;
        }

        .status-text {
            color: var(--compliant-green);
        }

        .maple-leaf {
            color: var(--primary-red);
            margin-right: 5px;
        }

        .canadian-theme {
            border-top: 3px solid var(--primary-red);
            position: relative;
        }

        .canadian-theme::before {
            content: "üçÅ";
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 20px;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .highlight {
            background-color: rgba(233, 196, 106, 0.3);
            padding: 2px 0;
        }

        .memory-panel {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .memory-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-dark-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .memory-title i {
            margin-right: 8px;
        }

        .memory-items {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .memory-item {
            background-color: rgba(168, 218, 220, 0.2);
            border: 1px solid var(--primary-light-blue);
            border-radius: 15px;
            padding: 5px 10px;
            font-size: 12px;
            display: flex;
            align-items: center;
            color: var(--primary-dark-blue);
        }

        .memory-item i {
            margin-right: 5px;
            font-size: 10px;
        }

        .memory-clear {
            background-color: transparent;
            border: none;
            color: var(--primary-blue);
            font-size: 12px;
            cursor: pointer;
            margin-left: auto;
        }

        .document-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-button {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: background-color 0.2s;
        }

        .action-button i {
            margin-right: 8px;
        }

        .action-button:hover {
            background-color: var(--primary-dark-blue);
        }

        .action-button.secondary {
            background-color: var(--primary-light-blue);
            color: var(--primary-dark-blue);
        }

        .action-button.secondary:hover {
            background-color: #86c5c7;
        }

        .citation {
            font-size: 10px;
            background-color: rgba(168, 218, 220, 0.3);
            padding: 2px 4px;
            border-radius: 4px;
            margin: 0 2px;
            cursor: pointer;
            color: var(--primary-dark-blue);
            font-weight: 600;
        }

        .citation-popup {
            position: absolute;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 300px;
            z-index: 100;
            font-size: 12px;
            color: var(--text-color);
            display: none;
        }

        .citation-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--primary-dark-blue);
        }

        .citation-text {
            font-style: italic;
            margin-bottom: 5px;
        }

        .citation-meta {
            font-size: 10px;
            color: #666;
        }

        /* Responsive adjustments */
        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: 2;
            }
            
            .main-content {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .document-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <span class="maple-leaf">üçÅ</span>
                <h1>Northern Tech Solutions</h1>
            </div>
            <div class="compliance-indicator">
                <i class="fas fa-shield-alt"></i>
                <span>Canadian Data Compliant</span>
            </div>
        </header>

        <div class="dashboard">
            <div class="sidebar">
                <div class="card canadian-theme">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-folder"></i> Document Library
                        </div>
                        <div class="card-actions">
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">All documents are stored in Canadian data centers and comply with PIPEDA.</span>
                            </div>
                        </div>
                    </div>
                    <div class="document-library">
                        <ul class="document-list" id="document-list">
                            <li class="document-item active" data-id="D001">
                                <i class="fas fa-file-pdf document-icon"></i>
                                <div class="document-info">
                                    <div class="document-title">SecureVault Product Manual</div>
                                    <div class="document-meta">
                                        <span>Apr 22, 2025</span>
                                        <span class="document-type">PDF</span>
                                    </div>
                                    <div class="document-status">
                                        <i class="fas fa-check-circle status-icon" style="color: var(--compliant-green)"></i>
                                        <span class="status-text">Canadian Hosted</span>
                                    </div>
                                </div>
                            </li>
                            <li class="document-item" data-id="D002">
                                <i class="fas fa-file-pdf document-icon"></i>
                                <div class="document-info">
                                    <div class="document-title">Canadian Data Residency Compliance Guide</div>
                                    <div class="document-meta">
                                        <span>Mar 15, 2025</span>
                                        <span class="document-type">PDF</span>
                                    </div>
                                    <div class="document-status">
                                        <i class="fas fa-check-circle status-icon" style="color: var(--compliant-green)"></i>
                                        <span class="status-text">Canadian Hosted</span>
                                    </div>
                                </div>
                            </li>
                            <li class="document-item" data-id="D003">
                                <i class="fas fa-file-pdf document-icon"></i>
                                <div class="document-info">
                                    <div class="document-title">Northern Tech Solutions Company Overview</div>
                                    <div class="document-meta">
                                        <span>Feb 5, 2025</span>
                                        <span class="document-type">PDF</span>
                                    </div>
                                    <div class="document-status">
                                        <i class="fas fa-check-circle status-icon" style="color: var(--compliant-green)"></i>
                                        <span class="status-text">Canadian Hosted</span>
                                    </div>
                                </div>
                            </li>
                            <li class="document-item" data-id="D005">
                                <i class="fas fa-file-pdf document-icon"></i>
                                <div class="document-info">
                                    <div class="document-title">DataInsight Implementation Guide</div>
                                    <div class="document-meta">
                                        <span>May 10, 2025</span>
                                        <span class="document-type">PDF</span>
                                    </div>
                                    <div class="document-status">
                                        <i class="fas fa-check-circle status-icon" style="color: var(--compliant-green)"></i>
                                        <span class="status-text">Canadian Hosted</span>
                                    </div>
                                </div>
                            </li>
                            <li class="document-item" data-id="D006">
                                <i class="fas fa-file-pdf document-icon"></i>
                                <div class="document-info">
                                    <div class="document-title">Canadian Privacy Law Updates 2025</div>
                                    <div class="document-meta">
                                        <span>May 20, 2025</span>
                                        <span class="document-type">PDF</span>
                                    </div>
                                    <div class="document-status">
                                        <i class="fas fa-check-circle status-icon" style="color: var(--compliant-green)"></i>
                                        <span class="status-text">Canadian Hosted</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card canadian-theme">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cloud-upload-alt"></i> Add New Document
                        </div>
                        <div class="card-actions">
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Upload new documents to be processed and indexed for AI search. All documents are stored in Canadian data centers.</span>
                            </div>
                        </div>
                    </div>
                    <div class="upload-area" id="upload-area">
                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                        <div class="upload-text">Drag & drop files here or click to browse</div>
                        <input type="file" id="upload-input" class="upload-input" accept=".pdf,.doc,.docx,.txt">
                    </div>
                    <div class="document-actions">
                        <button class="action-button" id="upload-button">
                            <i class="fas fa-upload"></i> Upload Document
                        </button>
                        <button class="action-button secondary" id="sample-document-button">
                            <i class="fas fa-plus"></i> Add Sample Document
                        </button>
                    </div>
                </div>
            </div>

            <div class="main-content">
                <div class="card canadian-theme">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-file-alt"></i> <span id="preview-title">SecureVault Product Manual</span>
                        </div>
                        <div class="card-actions">
                            <button id="download-document"><i class="fas fa-download"></i></button>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Document preview with AI-extracted key information.</span>
                            </div>
                        </div>
                    </div>
                    <div class="document-tags" id="document-tags">
                        <span class="document-tag">security</span>
                        <span class="document-tag">encryption</span>
                        <span class="document-tag">product manual</span>
                        <span class="document-tag">technical documentation</span>
                    </div>
                    <div class="document-preview" id="document-preview">
                        <h2>SecureVault 4.2 - Enterprise Security Solution</h2>
                        <p><strong>Version:</strong> 4.2.1</p>
                        <p><strong>Last Updated:</strong> April 22, 2025</p>
                        <p><strong>Author:</strong> David Chen, CTO</p>
                        
                        <h3>1. Introduction</h3>
                        <p>SecureVault is Northern Tech Solutions' flagship enterprise-grade data encryption and security solution designed specifically for Canadian organizations requiring strict data residency compliance. This manual provides comprehensive guidance on installation, configuration, and operation of SecureVault 4.2.</p>
                        
                        <h3>2. Key Features</h3>
                        <ul>
                            <li><strong>End-to-end encryption</strong> using AES-256 and RSA-4096 algorithms</li>
                            <li><strong>Canadian data residency</strong> with geo-fencing capabilities</li>
                            <li><strong>PIPEDA compliance</strong> frameworks and automatic reporting</li>
                            <li><strong>Access control management</strong> with role-based permissions</li>
                            <li><strong>Comprehensive audit logging</strong> for security monitoring</li>
                            <li><strong>Advanced threat detection</strong> with AI-powered anomaly identification</li>
                        </ul>
                        
                        <h3>3. Canadian Data Residency</h3>
                        <p>SecureVault ensures all data remains within Canadian borders through our network of data centers in Toronto, Montreal, Vancouver, and Calgary. The solution implements geo-fencing technology that prevents data from being transferred outside Canadian jurisdiction, ensuring compliance with data sovereignty requirements.</p>
                        
                        <h3>4. Implementation Guide</h3>
                        <p>Deployment of SecureVault requires the following components:</p>
                        <ul>
                            <li>SecureVault Server (minimum requirements: 8 CPU cores, 16GB RAM)</li>
                            <li>SecureVault Client Applications (Windows, macOS, Linux, iOS, Android)</li>
                            <li>Hardware Security Module (recommended for enterprise deployments)</li>
                            <li>Network configuration allowing secure communication on ports 443 and 8443</li>
                        </ul>
                        
                        <h3>5. Compliance Certifications</h3>
                        <p>SecureVault 4.2 has been certified compliant with:</p>
                        <ul>
                            <li>PIPEDA (Personal Information Protection and Electronic Documents Act)</li>
                            <li>PHIPA (Personal Health Information Protection Act)</li>
                            <li>PCI DSS (Payment Card Industry Data Security Standard)</li>
                            <li>SOC 2 Type II</li>
                            <li>ISO 27001:2022</li>
                        </ul>
                    </div>
                </div>

                <div class="card canadian-theme">
                    <div class="chat-container">
                        <div class="chat-header">
                            <div class="chat-title">
                                <i class="fas fa-robot"></i> AI Document Assistant
                                <div class="compliance-indicator" style="font-size: 12px; padding: 4px 8px; margin-left: 10px;">
                                    <i class="fas fa-shield-alt"></i>
                                    <span>Canadian LLM</span>
                                </div>
                            </div>
                            <div class="memory-indicator">
                                <i class="fas fa-brain"></i>
                                <span>Memory Active</span>
                                <span class="memory-count">3</span>
                            </div>
                        </div>
                        <div class="chat-messages" id="chat-messages">
                            <div class="message ai-message">
                                <p>üëã Hello! I'm your AI document assistant for Northern Tech Solutions. I can help you explore our document library, answer questions about specific documents, and provide insights based on our company's knowledge base.</p>
                                <p>All processing occurs in Canadian data centers in compliance with privacy regulations. What would you like to know about our documents?</p>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chat-input" placeholder="Ask about documents, products, or company information..." />
                            <button class="send-button" id="send-message">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="memory-panel">
                            <div class="memory-title">
                                <i class="fas fa-brain"></i> Conversation Memory
                                <button class="memory-clear" id="clear-memory">Clear Memory</button>
                            </div>
                            <div class="memory-items" id="memory-items">
                                <div class="memory-item"><i class="fas fa-file-pdf"></i> SecureVault Manual</div>
                                <div class="memory-item"><i class="fas fa-shield-alt"></i> Data Encryption</div>
                                <div class="memory-item"><i class="fas fa-check-circle"></i> PIPEDA Compliance</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chat-messages');
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-message');
            const documentList = document.getElementById('document-list');
            const documentPreview = document.getElementById('document-preview');
            const previewTitle = document.getElementById('preview-title');
            const documentTags = document.getElementById('document-tags');
            const uploadArea = document.getElementById('upload-area');
            const uploadInput = document.getElementById('upload-input');
            const uploadButton = document.getElementById('upload-button');
            const sampleDocumentButton = document.getElementById('sample-document-button');
            const clearMemoryButton = document.getElementById('clear-memory');
            const memoryItems = document.getElementById('memory-items');
            const memoryCount = document.querySelector('.memory-count');

            // Document data
            const documents = {
                'D001': {
                    title: 'SecureVault Product Manual',
                    date: 'Apr 22, 2025',
                    type: 'PDF',
                    tags: ['security', 'encryption', 'product manual', 'technical documentation'],
                    content: `
                        <h2>SecureVault 4.2 - Enterprise Security Solution</h2>
                        <p><strong>Version:</strong> 4.2.1</p>
                        <p><strong>Last Updated:</strong> April 22, 2025</p>
                        <p><strong>Author:</strong> David Chen, CTO</p>
                        
                        <h3>1. Introduction</h3>
                        <p>SecureVault is Northern Tech Solutions' flagship enterprise-grade data encryption and security solution designed specifically for Canadian organizations requiring strict data residency compliance. This manual provides comprehensive guidance on installation, configuration, and operation of SecureVault 4.2.</p>
                        
                        <h3>2. Key Features</h3>
                        <ul>
                            <li><strong>End-to-end encryption</strong> using AES-256 and RSA-4096 algorithms</li>
                            <li><strong>Canadian data residency</strong> with geo-fencing capabilities</li>
                            <li><strong>PIPEDA compliance</strong> frameworks and automatic reporting</li>
                            <li><strong>Access control management</strong> with role-based permissions</li>
                            <li><strong>Comprehensive audit logging</strong> for security monitoring</li>
                            <li><strong>Advanced threat detection</strong> with AI-powered anomaly identification</li>
                        </ul>
                        
                        <h3>3. Canadian Data Residency</h3>
                        <p>SecureVault ensures all data remains within Canadian borders through our network of data centers in Toronto, Montreal, Vancouver, and Calgary. The solution implements geo-fencing technology that prevents data from being transferred outside Canadian jurisdiction, ensuring compliance with data sovereignty requirements.</p>
                        
                        <h3>4. Implementation Guide</h3>
                        <p>Deployment of SecureVault requires the following components:</p>
                        <ul>
                            <li>SecureVault Server (minimum requirements: 8 CPU cores, 16GB RAM)</li>
                            <li>SecureVault Client Applications (Windows, macOS, Linux, iOS, Android)</li>
                            <li>Hardware Security Module (recommended for enterprise deployments)</li>
                            <li>Network configuration allowing secure communication on ports 443 and 8443</li>
                        </ul>
                        
                        <h3>5. Compliance Certifications</h3>
                        <p>SecureVault 4.2 has been certified compliant with:</p>
                        <ul>
                            <li>PIPEDA (Personal Information Protection and Electronic Documents Act)</li>
                            <li>PHIPA (Personal Health Information Protection Act)</li>
                            <li>PCI DSS (Payment Card Industry Data Security Standard)</li>
                            <li>SOC 2 Type II</li>
                            <li>ISO 27001:2022</li>
                        </ul>
                    `
                },
                'D002': {
                    title: 'Canadian Data Residency Compliance Guide',
                    date: 'Mar 15, 2025',
                    type: 'PDF',
                    tags: ['compliance', 'data residency', 'PIPEDA', 'regulatory', 'white paper'],
                    content: `
                        <h2>Canadian Data Residency Compliance Guide</h2>
                        <p><strong>Version:</strong> 2.1</p>
                        <p><strong>Last Updated:</strong> March 15, 2025</p>
                        <p><strong>Author:</strong> Sarah Johnson, CFO</p>
                        
                        <h3>1. Introduction to Data Residency</h3>
                        <p>Data residency refers to the geographic location where an organization's data is stored and processed. In Canada, data residency requirements are governed by federal and provincial privacy laws that mandate certain types of data must remain within Canadian borders.</p>
                        
                        <h3>2. Key Canadian Privacy Legislation</h3>
                        <ul>
                            <li><strong>PIPEDA (Personal Information Protection and Electronic Documents Act)</strong> - Federal legislation governing the collection, use, and disclosure of personal information</li>
                            <li><strong>Provincial Privacy Laws</strong> - Including PIPA (BC, Alberta), PHIPA (Ontario), and Act respecting the protection of personal information in the private sector (Quebec)</li>
                            <li><strong>CPPA (Consumer Privacy Protection Act)</strong> - Pending legislation that will replace PIPEDA with stronger enforcement mechanisms</li>
                        </ul>
                        
                        <h3>3. Data Residency Requirements</h3>
                        <p>Organizations operating in Canada must adhere to the following data residency requirements:</p>
                        <ul>
                            <li>Personal health information must be stored and processed within Canadian borders</li>
                            <li>Public sector data must remain in Canada unless explicit exemptions are granted</li>
                            <li>Financial institutions must maintain customer records within Canada</li>
                            <li>Quebec's Law 25 requires explicit consent for personal information transferred outside Quebec</li>
                        </ul>
                        
                        <h3>4. Northern Tech Solutions Compliance Framework</h3>
                        <p>Our comprehensive compliance framework ensures all customer data remains within Canadian borders:</p>
                        <ul>
                            <li>Network of data centers in Toronto, Montreal, Vancouver, and Calgary</li>
                            <li>Geo-fencing technology to prevent unauthorized data transfers</li>
                            <li>Regular compliance audits and certifications</li>
                            <li>Transparent data handling policies and procedures</li>
                            <li>Encryption of data at rest and in transit</li>
                        </ul>
                        
                        <h3>5. Penalties for Non-Compliance</h3>
                        <p>Failure to comply with Canadian data residency requirements can result in:</p>
                        <ul>
                            <li>Administrative monetary penalties up to $10 million or 3% of global revenue under CPPA</li>
                            <li>Reputational damage and loss of customer trust</li>
                            <li>Civil litigation and class action lawsuits</li>
                            <li>Regulatory investigations and compliance orders</li>
                        </ul>
                    `
                },
                'D003': {
                    title: 'Northern Tech Solutions Company Overview',
                    date: 'Feb 5, 2025',
                    type: 'PDF',
                    tags: ['company', 'overview', 'corporate', 'profile'],
                    content: `
                        <h2>Northern Tech Solutions - Company Overview</h2>
                        <p><strong>Version:</strong> 1.0</p>
                        <p><strong>Last Updated:</strong> February 5, 2025</p>
                        <p><strong>Author:</strong> Priya Sharma, VP of Marketing</p>
                        
                        <h3>1. About Northern Tech Solutions</h3>
                        <p>Northern Tech Solutions is a Canadian technology company founded in 2011 and headquartered in Toronto, Ontario. We specialize in providing innovative technology solutions with a focus on data security, cloud infrastructure, business intelligence, and regulatory compliance for Canadian organizations.</p>
                        
                        <h3>2. Our Mission</h3>
                        <p>Empowering Canadian businesses with innovative technology solutions while maintaining the highest standards of data privacy and security.</p>
                        
                        <h3>3. Leadership Team</h3>
                        <ul>
                            <li><strong>Marie Tremblay</strong> - Chief Executive Officer</li>
                            <li><strong>David Chen</strong> - Chief Technology Officer</li>
                            <li><strong>Sarah Johnson</strong> - Chief Financial Officer</li>
                            <li><strong>Jean Bouchard</strong> - VP of Sales</li>
                            <li><strong>Priya Sharma</strong> - VP of Marketing</li>
                        </ul>
                        
                        <h3>4. Our Products</h3>
                        <ul>
                            <li><strong>SecureVault</strong> - Enterprise-grade data encryption and security solution</li>
                            <li><strong>CloudNorth</strong> - Canadian-hosted cloud infrastructure service</li>
                            <li><strong>DataInsight</strong> - Advanced analytics platform for business intelligence</li>
                            <li><strong>ComplianceGuard</strong> - Automated compliance management system</li>
                            <li><strong>NorthStar CRM</strong> - Customer relationship management solution</li>
                        </ul>
                        
                        <h3>5. Canadian Presence</h3>
                        <p>Northern Tech Solutions maintains offices in:</p>
                        <ul>
                            <li>Toronto, Ontario (Headquarters) - 124 employees</li>
                            <li>Montreal, Quebec - 67 employees</li>
                            <li>Vancouver, British Columbia - 58 employees</li>
                            <li>Calgary, Alberta - 32 employees</li>
                        </ul>
                        
                        <h3>6. Our Commitment to Canada</h3>
                        <p>As a proudly Canadian company, Northern Tech Solutions is committed to:</p>
                        <ul>
                            <li>Maintaining all data within Canadian borders</li>
                            <li>Creating technology jobs across Canada</li>
                            <li>Supporting Canadian privacy and data sovereignty</li>
                            <li>Developing solutions tailored to Canadian regulatory requirements</li>
                            <li>Contributing to Canada's technology innovation ecosystem</li>
                        </ul>
                    `
                },
                'D005': {
                    title: 'DataInsight Implementation Guide',
                    date: 'May 10, 2025',
                    type: 'PDF',
                    tags: ['implementation', 'technical', 'data analytics', 'guide'],
                    content: `
                        <h2>DataInsight Implementation Guide</h2>
                        <p><strong>Version:</strong> 3.2</p>
                        <p><strong>Last Updated:</strong> May 10, 2025</p>
                        <p><strong>Author:</strong> Michael Wong, Director of Engineering</p>
                        
                        <h3>1. Introduction to DataInsight</h3>
                        <p>DataInsight is Northern Tech Solutions' advanced analytics platform designed to help organizations transform raw data into actionable business intelligence. This guide provides detailed instructions for implementing DataInsight in your organization.</p>
                        
                        <h3>2. System Requirements</h3>
                        <ul>
                            <li><strong>Server Requirements:</strong> 16+ CPU cores, 64GB+ RAM, 1TB+ storage</li>
                            <li><strong>Supported Databases:</strong> PostgreSQL, MySQL, SQL Server, Oracle, MongoDB</li>
                            <li><strong>Supported Operating Systems:</strong> Windows Server 2019+, Ubuntu 20.04+, Red Hat Enterprise Linux 8+</li>
                            <li><strong>Network Requirements:</strong> 1Gbps+ network connection, static IP address</li>
                        </ul>
                        
                        <h3>3. Implementation Process</h3>
                        <ol>
                            <li><strong>Pre-Installation Assessment</strong> - Evaluate existing data infrastructure and define analytics objectives</li>
                            <li><strong>Data Source Configuration</strong> - Connect and configure data sources for ingestion</li>
                            <li><strong>Core Platform Installation</strong> - Deploy DataInsight server components</li>
                            <li><strong>Dashboard Configuration</strong> - Set up initial dashboards and visualizations</li>
                            <li><strong>User Access Management</strong> - Configure user roles and permissions</li>
                            <li><strong>Testing and Validation</strong> - Verify data accuracy and system performance</li>
                            <li><strong>User Training</strong> - Conduct training sessions for end users and administrators</li>
                        </ol>
                        
                        <h3>4. Data Residency Configuration</h3>
                        <p>DataInsight includes specific settings to ensure Canadian data residency compliance:</p>
                        <ul>
                            <li>Data storage location configuration (Toronto, Montreal, Vancouver, Calgary)</li>
                            <li>Geo-fencing rules to prevent data from leaving Canadian borders</li>
                            <li>Encryption settings for data at rest and in transit</li>
                            <li>Audit logging for compliance reporting</li>
                        </ul>
                        
                        <h3>5. Integration Options</h3>
                        <p>DataInsight can integrate with various systems through:</p>
                        <ul>
                            <li>RESTful API for custom integrations</li>
                            <li>Pre-built connectors for common business applications</li>
                            <li>JDBC/ODBC connections for database integration</li>
                            <li>ETL tools for complex data transformations</li>
                            <li>Webhook support for real-time data updates</li>
                        </ul>
                        
                        <h3>6. Support and Maintenance</h3>
                        <p>Northern Tech Solutions provides comprehensive support for DataInsight implementations:</p>
                        <ul>
                            <li>24/7 technical support via phone, email, and chat</li>
                            <li>Regular software updates and security patches</li>
                            <li>Performance monitoring and optimization</li>
                            <li>Quarterly system health checks</li>
                            <li>Implementation consulting services</li>
                        </ul>
                    `
                },
                'D006': {
                    title: 'Canadian Privacy Law Updates 2025',
                    date: 'May 20, 2025',
                    type: 'PDF',
                    tags: ['legal', 'privacy', 'compliance', 'regulatory', 'PIPEDA'],
                    content: `
                        <h2>Canadian Privacy Law Updates 2025</h2>
                        <p><strong>Version:</strong> 1.1</p>
                        <p><strong>Last Updated:</strong> May 20, 2025</p>
                        <p><strong>Author:</strong> External Legal Counsel</p>
                        
                        <h3>1. Introduction</h3>
                        <p>This document summarizes the significant changes to Canadian privacy laws in 2025 and their implications for organizations operating in Canada. These updates reflect Canada's evolving approach to data protection and privacy in the digital age.</p>
                        
                        <h3>2. Consumer Privacy Protection Act (CPPA)</h3>
                        <p>The CPPA has now replaced PIPEDA as Canada's primary federal privacy law for the private sector. Key provisions include:</p>
                        <ul>
                            <li>Enhanced consent requirements for collection, use, and disclosure of personal information</li>
                            <li>New data portability rights allowing individuals to transfer their data between organizations</li>
                            <li>Right to be forgotten (data deletion upon request)</li>
                            <li>Algorithmic transparency requirements for automated decision systems</li>
                            <li>Administrative monetary penalties up to $10 million or 3% of global revenue</li>
                        </ul>
                        
                        <h3>3. Provincial Law Updates</h3>
                        <ul>
                            <li><strong>Quebec's Law 25</strong> - Now fully in effect with strict consent requirements and data localization provisions</li>
                            <li><strong>Ontario's Privacy Law</strong> - New provincial privacy legislation enacted for the private sector</li>
                            <li><strong>British Columbia PIPA Amendments</strong> - Updated to align with federal CPPA requirements</li>
                            <li><strong>Alberta PIPA Revisions</strong> - Enhanced provisions for breach notification and consent</li>
                        </ul>
                        
                        <h3>4. Data Residency Requirements</h3>
                        <p>Updated data residency requirements across Canada include:</p>
                        <ul>
                            <li>Federal public sector data must be stored and processed in Canada</li>
                            <li>Quebec requires explicit consent for data transfers outside the province</li>
                            <li>Health information must remain within Canadian borders across all provinces</li>
                            <li>Financial institutions face stricter requirements for cross-border data transfers</li>
                        </ul>
                        
                        <h3>5. Enforcement Trends</h3>
                        <p>The Office of the Privacy Commissioner of Canada and provincial regulators have demonstrated increased enforcement activity:</p>
                        <ul>
                            <li>First administrative monetary penalties issued under CPPA</li>
                            <li>Joint investigations between federal and provincial authorities</li>
                            <li>Focus on artificial intelligence governance and algorithmic impact</li>
                            <li>Emphasis on demonstrable accountability and privacy by design</li>
                        </ul>
                        
                        <h3>6. Compliance Recommendations</h3>
                        <ul>
                            <li>Update privacy policies and consent mechanisms to reflect new requirements</li>
                            <li>Implement data mapping to identify cross-border data flows</li>
                            <li>Enhance data subject request procedures for new individual rights</li>
                            <li>Review and update vendor contracts for compliance with data residency requirements</li>
                            <li>Conduct privacy impact assessments for high-risk processing activities</li>
                        </ul>
                    `
                }
            };

            // Sample document to be added during demo
            const sampleDocument = {
                id: 'D007',
                title: 'AI Integration Whitepaper',
                date: 'June 6, 2025',
                type: 'PDF',
                tags: ['AI', 'machine learning', 'integration', 'white paper', 'technical'],
                content: `
                    <h2>AI Integration Whitepaper</h2>
                    <p><strong>Version:</strong> 1.0</p>
                    <p><strong>Last Updated:</strong> June 6, 2025</p>
                    <p><strong>Author:</strong> Ahmed Hassan, Lead Data Scientist</p>
                    
                    <h3>1. Introduction to AI Integration</h3>
                    <p>This whitepaper explores best practices for integrating artificial intelligence capabilities into existing enterprise systems. It focuses specifically on Canadian regulatory requirements and privacy-preserving AI implementation strategies.</p>
                    
                    <h3>2. Canadian AI Regulatory Landscape</h3>
                    <p>Canada has developed a unique approach to AI regulation that balances innovation with ethical considerations:</p>
                    <ul>
                        <li>Artificial Intelligence and Data Act (AIDA) requirements for high-impact AI systems</li>
                        <li>Provincial regulations affecting AI deployment in regulated industries</li>
                        <li>Ethical AI frameworks developed by the Canadian government</li>
                        <li>Cross-border data considerations for AI training and inference</li>
                    </ul>
                    
                    <h3>3. Privacy-Preserving AI Techniques</h3>
                    <p>To maintain compliance with Canadian privacy laws, organizations should consider:</p>
                    <ul>
                        <li>Federated learning for distributed model training without centralizing sensitive data</li>
                        <li>Differential privacy to add noise to training data while preserving utility</li>
                        <li>Homomorphic encryption for computing on encrypted data</li>
                        <li>Canadian-hosted model deployment to ensure data residency compliance</li>
                        <li>Explainable AI approaches to provide transparency in decision-making</li>
                    </ul>
                    
                    <h3>4. Northern Tech Solutions AI Platform</h3>
                    <p>Our AI integration platform offers several key advantages for Canadian organizations:</p>
                    <ul>
                        <li>Exclusively Canadian-hosted infrastructure for model training and deployment</li>
                        <li>Pre-built compliance frameworks for regulated industries</li>
                        <li>Privacy-preserving AI techniques built into the platform</li>
                        <li>Comprehensive audit trails for regulatory reporting</li>
                        <li>Integration with existing Northern Tech Solutions products</li>
                    </ul>
                    
                    <h3>5. Implementation Methodology</h3>
                    <p>Our recommended approach for AI integration follows these steps:</p>
                    <ol>
                        <li>Business objective definition and compliance assessment</li>
                        <li>Data inventory and privacy impact analysis</li>
                        <li>Model selection and privacy-preserving technique implementation</li>
                        <li>Canadian infrastructure deployment and testing</li>
                        <li>Ongoing monitoring and regulatory compliance maintenance</li>
                    </ol>
                    
                    <h3>6. Case Studies</h3>
                    <p>This section presents three case studies of successful AI integrations in Canadian organizations:</p>
                    <ul>
                        <li>Major Canadian financial institution implementing fraud detection AI</li>
                        <li>Healthcare provider deploying diagnostic assistance tools</li>
                        <li>Public sector organization using AI for service optimization</li>
                    </ul>
                `
            };

            // Predefined AI responses based on documents
            const documentResponses = {
                'SecureVault': "SecureVault is our flagship enterprise-grade data encryption and security solution designed specifically for Canadian organizations requiring strict data residency compliance. It features end-to-end encryption using AES-256 and RSA-4096 algorithms, Canadian data residency with geo-fencing capabilities, PIPEDA compliance frameworks, access control management, comprehensive audit logging, and advanced threat detection. All data remains within Canadian borders through our network of data centers in Toronto, Montreal, Vancouver, and Calgary.",
                'DataInsight': "DataInsight is our advanced analytics platform designed to help organizations transform raw data into actionable business intelligence. It supports various databases including PostgreSQL, MySQL, SQL Server, Oracle, and MongoDB. The implementation process includes pre-installation assessment, data source configuration, core platform installation, dashboard configuration, user access management, testing and validation, and user training. It includes specific settings to ensure Canadian data residency compliance.",
                'ComplianceGuard': "ComplianceGuard is our automated compliance management system for Canadian regulatory requirements. It helps organizations maintain compliance with various Canadian privacy laws including PIPEDA, CPPA, and provincial regulations. It features automated compliance assessments, documentation management, audit preparation tools, and comprehensive reporting capabilities.",
                'CloudNorth': "CloudNorth is our Canadian-hosted cloud infrastructure service with guaranteed data sovereignty. All data is stored exclusively in our Canadian data centers, ensuring compliance with data residency requirements. It offers scalable compute resources, managed storage solutions, comprehensive disaster recovery options, and 24/7 technical support from our Canadian support team.",
                'PIPEDA': "PIPEDA (Personal Information Protection and Electronic Documents Act) is federal legislation governing the collection, use, and disclosure of personal information in Canada. Our products are designed to help organizations maintain PIPEDA compliance through data residency controls, consent management, and comprehensive audit trails. The CPPA (Consumer Privacy Protection Act) is set to replace PIPEDA with stronger enforcement mechanisms including administrative monetary penalties up to $10 million or 3% of global revenue.",
                'Canadian': "Northern Tech Solutions is a proudly Canadian company headquartered in Toronto with offices in Montreal, Vancouver, and Calgary. We maintain all customer data within Canadian borders through our network of Canadian data centers. Our solutions are specifically designed to meet Canadian regulatory requirements including PIPEDA, provincial privacy laws, and industry-specific regulations. We currently employ 281 people across our Canadian offices.",
                'AI': "Our AI integration platform offers several key advantages for Canadian organizations including exclusively Canadian-hosted infrastructure for model training and deployment, pre-built compliance frameworks for regulated industries, privacy-preserving AI techniques built into the platform, comprehensive audit trails for regulatory reporting, and integration with existing Northern Tech Solutions products. We recommend privacy-preserving techniques such as federated learning, differential privacy, and homomorphic encryption to maintain compliance with Canadian privacy laws."
            };

            // Chat memory system
            let chatMemory = [
                { type: 'document', value: 'SecureVault Manual' },
                { type: 'concept', value: 'Data Encryption' },
                { type: 'concept', value: 'PIPEDA Compliance' }
            ];

            // Add event listeners
            sendButton.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Document list click event
            documentList.addEventListener('click', function(e) {
                const item = e.target.closest('.document-item');
                if (item) {
                    // Remove active class from all items
                    document.querySelectorAll('.document-item').forEach(el => {
                        el.classList.remove('active');
                    });
                    
                    // Add active class to clicked item
                    item.classList.add('active');
                    
                    // Update document preview
                    const docId = item.getAttribute('data-id');
                    updateDocumentPreview(docId);
                }
            });

            // Upload area click event
            uploadArea.addEventListener('click', function() {
                uploadInput.click();
            });

            // Upload input change event
            uploadInput.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    simulateFileUpload(file.name);
                }
            });

            // Upload button click event
            uploadButton.addEventListener('click', function() {
                uploadInput.click();
            });

            // Sample document button click event
            sampleDocumentButton.addEventListener('click', function() {
                addSampleDocument();
            });

            // Clear memory button click event
            clearMemoryButton.addEventListener('click', function() {
                chatMemory = [];
                updateMemoryDisplay();
                addMessage("Memory cleared. I've forgotten our previous conversation context.", 'ai');
            });

            // Drag and drop functionality
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.style.borderColor = var(--primary-blue);
                uploadArea.style.backgroundColor = 'rgba(168, 218, 220, 0.1)';
            });

            uploadArea.addEventListener('dragleave', function() {
                uploadArea.style.borderColor = var(--border-color);
                uploadArea.style.backgroundColor = 'transparent';
            });

            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.style.borderColor = var(--border-color);
                uploadArea.style.backgroundColor = 'transparent';
                
                if (e.dataTransfer.files.length > 0) {
                    const file = e.dataTransfer.files[0];
                    simulateFileUpload(file.name);
                }
            });

            // Function to send a message
            function sendMessage() {
                const message = chatInput.value.trim();
                if (message === '') return;

                // Add user message to chat
                addMessage(message, 'user');
                chatInput.value = '';

                // Simulate AI thinking
                setTimeout(() => {
                    // Add typing indicator
                    const typingIndicator = document.createElement('div');
                    typingIndicator.className = 'message ai-message';
                    typingIndicator.id = 'typing-indicator';
                    typingIndicator.innerHTML = '<span class="loader"></span> Analyzing documents...';
                    chatMessages.appendChild(typingIndicator);
                    chatMessages.scrollTop = chatMessages.scrollHeight;

                    // Process the message and respond after a delay
                    setTimeout(() => {
                        // Remove typing indicator
                        const indicator = document.getElementById('typing-indicator');
                        if (indicator) chatMessages.removeChild(indicator);

                        // Generate response based on keywords
                        let response = "I don't have specific information about that in our document library. Would you like me to search for related documents or help you with something else?";
                        let source = null;
                        
                        const lowerMessage = message.toLowerCase();
                        
                        // Check for document-specific keywords
                        for (const [keyword, resp] of Object.entries(documentResponses)) {
                            if (lowerMessage.includes(keyword.toLowerCase())) {
                                response = resp;
                                source = keyword;
                                
                                // Add to memory if not already present
                                addToMemory('concept', keyword);
                                break;
                            }
                        }
                        
                        // Check if asking about currently displayed document
                        const activeDoc = document.querySelector('.document-item.active');
                        if (activeDoc) {
                            const docId = activeDoc.getAttribute('data-id');
                            const docTitle = documents[docId].title;
                            
                            if (lowerMessage.includes(docTitle.toLowerCase()) || 
                                lowerMessage.includes('this document') || 
                                lowerMessage.includes('current document')) {
                                
                                response = generateDocumentResponse(docId);
                                source = docTitle;
                                
                                // Add to memory
                                addToMemory('document', docTitle);
                            }
                        }

                        // Add AI response with source citation if available
                        if (source) {
                            addMessage(response, 'ai', source);
                        } else {
                            addMessage(response, 'ai');
                        }
                    }, 1500);
                }, 500);
            }

            // Function to add a message to the chat
            function addMessage(text, sender, source = null) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}-message`;
                
                if (source) {
                    // Add citation to the text
                    const citationText = text.replace(/\b(SecureVault|DataInsight|ComplianceGuard|CloudNorth|PIPEDA|Canadian|AI)\b/g, 
                        match => `<span class="highlight">${match}</span>`);
                    
                    messageDiv.innerHTML = `
                        <p>${citationText}</p>
                        <div class="message-source">Source: ${source}</div>
                    `;
                } else {
                    messageDiv.textContent = text;
                }
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Function to update document preview
            function updateDocumentPreview(docId) {
                const doc = documents[docId];
                if (doc) {
                    previewTitle.textContent = doc.title;
                    documentPreview.innerHTML = doc.content;
                    
                    // Update tags
                    documentTags.innerHTML = '';
                    doc.tags.forEach(tag => {
                        const tagSpan = document.createElement('span');
                        tagSpan.className = 'document-tag';
                        tagSpan.textContent = tag;
                        documentTags.appendChild(tagSpan);
                    });
                    
                    // Add to memory
                    addToMemory('document', doc.title);
                }
            }

            // Function to simulate file upload
            function simulateFileUpload(fileName) {
                // Create processing indicator
                const processingDiv = document.createElement('div');
                processingDiv.className = 'processing-indicator';
                processingDiv.innerHTML = `
                    <span class="loader"></span>
                    <span class="processing-text">Processing ${fileName}...</span>
                `;
                
                // Add to document list area
                documentList.insertAdjacentElement('afterbegin', processingDiv);
                
                // Simulate processing delay
                setTimeout(() => {
                    // Remove processing indicator
                    processingDiv.remove();
                    
                    // Add sample document to library
                    addSampleDocument();
                    
                    // Add AI message about the new document
                    addMessage(`I've processed the new document "${sampleDocument.title}". It contains information about AI integration best practices for Canadian organizations, privacy-preserving AI techniques, and regulatory compliance. Would you like me to summarize its key points?`, 'ai');
                }, 3000);
            }

            // Function to add sample document
            function addSampleDocument() {
                // Check if already added
                if (document.querySelector(`[data-id="${sampleDocument.id}"]`)) {
                    return;
                }
                
                // Create new document item
                const newDocItem = document.createElement('li');
                newDocItem.className = 'document-item';
                newDocItem.setAttribute('data-id', sampleDocument.id);
                newDocItem.innerHTML = `
                    <i class="fas fa-file-pdf document-icon"></i>
                    <div class="document-info">
                        <div class="document-title">${sampleDocument.title}</div>
                        <div class="document-meta">
                            <span>${sampleDocument.date}</span>
                            <span class="document-type">${sampleDocument.type}</span>
                        </div>
                        <div class="document-status">
                            <i class="fas fa-check-circle status-icon" style="color: var(--compliant-green)"></i>
                            <span class="status-text">Canadian Hosted</span>
                        </div>
                    </div>
                `;
                
                // Add to document list
                documentList.insertBefore(newDocItem, documentList.firstChild);
                
                // Add document to documents object
                documents[sampleDocument.id] = {
                    title: sampleDocument.title,
                    date: sampleDocument.date,
                    type: sampleDocument.type,
                    tags: sampleDocument.tags,
                    content: sampleDocument.content
                };
                
                // Select the new document
                newDocItem.click();
                
                // Add to memory
                addToMemory('document', sampleDocument.title);
                
                // Update document responses
                documentResponses['AI Integration'] = "Our AI integration platform offers several key advantages for Canadian organizations including exclusively Canadian-hosted infrastructure for model training and deployment, pre-built compliance frameworks for regulated industries, privacy-preserving AI techniques built into the platform, comprehensive audit trails for regulatory reporting, and integration with existing Northern Tech Solutions products. We recommend privacy-preserving techniques such as federated learning, differential privacy, and homomorphic encryption to maintain compliance with Canadian privacy laws.";
            }

            // Function to add to memory
            function addToMemory(type, value) {
                // Check if already in memory
                const exists = chatMemory.some(item => 
                    item.type === type && item.value === value);
                
                if (!exists) {
                    chatMemory.push({ type, value });
                    updateMemoryDisplay();
                }
            }

            // Function to update memory display
            function updateMemoryDisplay() {
                memoryItems.innerHTML = '';
                chatMemory.forEach(item => {
                    const memoryItem = document.createElement('div');
                    memoryItem.className = 'memory-item';
                    
                    let icon = 'fas fa-lightbulb';
                    if (item.type === 'document') {
                        icon = 'fas fa-file-pdf';
                    } else if (item.type === 'concept') {
                        icon = 'fas fa-brain';
                    }
                    
                    memoryItem.innerHTML = `<i class="${icon}"></i> ${item.value}`;
                    memoryItems.appendChild(memoryItem);
                });
                
                // Update memory count
                memoryCount.textContent = chatMemory.length;
            }

            // Function to generate document-specific response
            function generateDocumentResponse(docId) {
                const doc = documents[docId];
                switch(docId) {
                    case 'D001':
                        return "The SecureVault Product Manual describes our flagship enterprise-grade data encryption and security solution. Key features include end-to-end encryption using AES-256 and RSA-4096 algorithms, Canadian data residency with geo-fencing capabilities, PIPEDA compliance frameworks, access control management, comprehensive audit logging, and advanced threat detection. It ensures all data remains within Canadian borders through our network of data centers.";
                    case 'D002':
                        return "The Canadian Data Residency Compliance Guide explains that data residency refers to the geographic location where an organization's data is stored and processed. In Canada, key legislation includes PIPEDA, provincial privacy laws, and the upcoming CPPA. Organizations must ensure personal health information, public sector data, and financial records remain within Canadian borders. Penalties for non-compliance can reach $10 million or 3% of global revenue under CPPA.";
                    case 'D003':
                        return "The Company Overview document explains that Northern Tech Solutions is a Canadian technology company founded in 2011 and headquartered in Toronto. Our mission is empowering Canadian businesses with innovative technology solutions while maintaining the highest standards of data privacy and security. We have offices in Toronto (124 employees), Montreal (67 employees), Vancouver (58 employees), and Calgary (32 employees). Our product suite includes SecureVault, CloudNorth, DataInsight, ComplianceGuard, and NorthStar CRM.";
                    case 'D005':
                        return "The DataInsight Implementation Guide outlines the process for implementing our advanced analytics platform. System requirements include 16+ CPU cores, 64GB+ RAM, and 1TB+ storage. The implementation process involves pre-installation assessment, data source configuration, core platform installation, dashboard configuration, user access management, testing and validation, and user training. DataInsight includes specific settings to ensure Canadian data residency compliance, including data storage location configuration and geo-fencing rules.";
                    case 'D006':
                        return "The Canadian Privacy Law Updates 2025 document summarizes recent changes to privacy laws. The CPPA has replaced PIPEDA with enhanced consent requirements, data portability rights, right to be forgotten, and algorithmic transparency requirements. Provincial updates include Quebec's Law 25, new Ontario privacy legislation, and amendments to BC and Alberta PIPA. Data residency requirements have been strengthened, requiring federal public sector data, health information, and financial data to remain within Canadian borders.";
                    case 'D007':
                        return "The AI Integration Whitepaper explores best practices for integrating AI capabilities into enterprise systems with a focus on Canadian regulatory requirements. It covers the Canadian AI regulatory landscape including AIDA requirements, privacy-preserving techniques like federated learning and differential privacy, and our Canadian-hosted AI platform. The implementation methodology includes business objective definition, data inventory, model selection, Canadian infrastructure deployment, and ongoing compliance monitoring.";
                    default:
                        return "I can provide information about this document if you have specific questions.";
                }
            }

            // Initialize with default document
            updateDocumentPreview('D001');
        });
    </script>
</body>
</html>
